# My Project

Этот проект представляет собой сервис для сокращения URL. Он поддерживает два режима хранения данных:

1. **In-memory**: Данные хранятся в памяти.
2. **PostgreSQL**: Данные хранятся в базе данных PostgreSQL.

## Оглавление

- [Клонирование репозитория](#клонирование-репозитория)
- [Запуск Docker-образа с хранилищем в памяти](#запуск-docker-образа-с-хранилищем-в-памяти)
- [Запуск Docker-образа с хранилищем в PostgreSQL](#запуск-docker-образа-с-хранилищем-в-postgresql)
- [Пример запросов к серверу](#пример-запросов-к-серверу)
- [Запуск тестов](#запуск-тестов)
- [Технические детали](#технические-детали)

## Клонирование репозитория

Перед началом работы необходимо склонировать репозиторий на ваш компьютер. Для этого выполните следующую команду:

   ```bash
   git clone https://github.com/Drondobycha/OzonBankInternship.git
   ```
После клонирования перейдите в директорию проекта:
   ```bash
   cd OzonBankInternship/
   ```

## Запуск Docker-образа с хранилищем в памяти

1. Перейдите в корневую директорию проекта.
2. Соберите Docker-образ:

   ```bash
    docker build -t app .
   ```
3. Запустите контейнер:

   ```bash
    docker run -p 3000:3000 app:latest
    ```
    Сервис будет доступен по адресу: http://localhost:3000.

## Запуск Docker-образа с хранилищем в PostgreSQL

1. Перейдите в корневую директорию проекта.
2. Соберите Docker-образ (если еще не сделали):

   ```bash
    docker build -t app .
   ```
3. Запустите сервис с помощью Docker Compose:
    
    ```bash
    docker compose up
    ```
Сервис будет доступен по адресу: http://localhost:3000, а PostgreSQL — на порту 5432.

## Пример запросов к серверу
   ```bash
   curl -X POST -H "Content-Type: application/json" -d '{"url": "https://www.exampl.com"}' http://localhost:3000/shorten
   ```
   ```bash
   curl http://localhost:3000/redirect/сокращённый_url
   ```

## Запуск тестов

Для запуска тестов необходимо установить Go на ваш компьютер.

1. Установите Go, если он еще не установлен. Инструкции по установке можно найти на официальном сайте Go.
2. Перейдите в корневую директорию проекта.
3. Запустите тесты:

    ```bash
    go test -v ./...
    ```

## Технические детали

- **Язык программирования**: Go
- **Фреймворк**: Стандартная библиотека Go и PGX
- **Хранение**:
    * In-memory
    * PosgreSQL
- **Тестирование**: Используется стандартный пакет `testing` и `net/http/httptest`
